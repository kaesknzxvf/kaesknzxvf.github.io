<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Flutter 01 Simple Chat UI 응용 01 화면 간 데이터 전달, 메세지 입력" /><meta name="author" content="Kae" /><meta property="og:locale" content="en" /><meta name="description" content="Developer, Study, Flutter, Programming, iOS" /><meta property="og:description" content="Developer, Study, Flutter, Programming, iOS" /><link rel="canonical" href="https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-EX01/" /><meta property="og:url" content="https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-EX01/" /><meta property="og:site_name" content="Kae’s Dev" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-12T15:16:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Flutter 01 Simple Chat UI 응용 01 화면 간 데이터 전달, 메세지 입력" /><meta name="twitter:site" content="@kzaxevsf52" /><meta name="twitter:creator" content="@kzaxevsf52" /><meta name="google-site-verification" content="tEJ2GfzgZDbKuox8B6dklyj9Al_5yxKNq-ImVP9K4hc" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Kae","url":"https://github.com/kaesknzxvf"},"dateModified":"2022-09-28T21:30:13+09:00","datePublished":"2022-08-12T15:16:00+09:00","description":"Developer, Study, Flutter, Programming, iOS","headline":"Flutter 01 Simple Chat UI 응용 01 화면 간 데이터 전달, 메세지 입력","mainEntityOfPage":{"@type":"WebPage","@id":"https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-EX01/"},"url":"https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-EX01/"}</script><title>Flutter 01 Simple Chat UI 응용 01 화면 간 데이터 전달, 메세지 입력 | Kae's Dev</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Kae's Dev"><meta name="application-name" content="Kae's Dev"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/profile/main_img.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Kae's Dev</a></div><div class="site-subtitle font-italic">honyarara</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/kaesknzxvf" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/kzaxevsf52" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Flutter 01 Simple Chat UI 응용 01 화면 간 데이터 전달, 메세지 입력 </span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Flutter 01 Simple Chat UI 응용 01 화면 간 데이터 전달, 메세지 입력</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1660284960" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 12, 2022 </em> </span> <span> Updated <em class="" data-ts="1664368213" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 28, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/kaesknzxvf">Kae</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="6549 words"> <em>36 min</em> read</span></div></div></div><div class="post-content"><p>이 포스트는</p><ul><li><a href="https://www.freecodecamp.org/news/build-a-chat-app-ui-with-flutter/">How to Build a Chat App UI With Flutter and Dart</a></ul><p>을 따라서 작성한 Flutter Simple Chat UI 을 응용하여 좀 더 그럴듯한 채팅앱을 구현하기 위한 과정을 다룬다.</p><p>주요 내용은 이하와 같다.</p><ul><li>화면 간의 데이터 전달<li>메세지 입력<li>메세지 입력에 따른 Chat Detail 화면의 디테일한 UI 수정</ul><p>원문의 예제는 단순히 UI만 다루는 포스트이다 보니, 실제로 데이터를 전달하거나 저장하는 등 데이터를 처리하는 작업은 해주지 않는다. 그러므로 이번 포스트부터는 스스로 공부하며 추가한 코드이다.</p><p>관련 포스트</p><ul><li><a href="https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-01/">Base, Chat 화면 구현</a><li><a href="https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-02/">Chat Detail 화면 구현</a><li>응용 01 (Chat Detail 화면) 화면 간 데이터 전달, 메세지 입력 (현재포스트)<li><a href="https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-EX02/">응용 02 데이터 로컬 저장 및 읽기, 쓰기</a><li><a href="https://kaesknzxvf.github.io/posts/Flutter-Simple-Chat-UI-EX03/">응용 03 데이터 로컬 저장 및 읽기,쓰기_메세지로그편</a></ul><hr /><h1 id="환경">환경</h1><ul><li>MacBook Air (M1, 2020)<li><p>macOS Monterey (v12.4)</p><li>Flutter 3.0.3<li><p>Dart 2.17.5</p><li>Visual Studio Code 1.69.0</ul><hr /><h1 id="chat-화면---chat-detail-화면에-데이터-전달">Chat 화면 -&gt; Chat Detail 화면에 데이터 전달</h1><h2 id="chat-detail-헤더-ui에-값-전달"><span class="mr-2">Chat Detail 헤더 UI에 값 전달</span><a href="#chat-detail-헤더-ui에-값-전달" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_01.png" alt="Flutter Simple chat UI ex 01" width="30%" height="30%" data-proofer-ignore></p><p>지금은 Chat 화면의 대화상대 리스트의 어떤 개체를 선택해도 Chat Detail 화면은 위와 같이 고정 된 헤더를 가진 화면이 실행될 뿐이지만, 헤더에 내가 선택한 대화 상대의 정보가 뜨게 만들어 주고 싶다.<br /> 즉, 내가 Chat 화면의 리스트 중에서 어떤 개체를 선택하였는지, Chat Detail 화면에 전달할 필요가 있다.</p><p>기본 개념 참고한 페이지</p><ul><li><a href="https://flutter-ko.dev/docs/cookbook/navigation/passing-data">새로운 화면으로 데이터 보내기</a></ul><p>위의 페이지는 보면 onTap 내에서 <a href="https://api.flutter.dev/flutter/widgets/Navigator/push.html">Navigator.push</a> 를 이용하여 todo리스트의 데이터를 전달해주는 예제이다. 전달해주는 데이터만 다를 뿐, 기본 개념은 같으므로 이 예제를 보고 따라하면 문제 없이 데이터를 전달해 해줄 수 있다.</p><p>먼저, 작성한 simple chat ui 어플리케이션이 어떻게 생겨 먹었는지 그려보자.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_02.jpg" alt="Flutter Simple chat UI ex 02" width="30%" height="30%" data-proofer-ignore></p><p>screen 인 <code class="language-plaintext highlighter-rouge">ChatPage</code> 안에 <code class="language-plaintext highlighter-rouge">conversationList</code> 위젯이 위치하고 있으며, 실질적인 리스트뷰의 출력이나 제스처 동작은 <code class="language-plaintext highlighter-rouge">conversationList</code> 에서 일어나고 있다는 것이 포인트다.</p><p>이제 코드를 보면 위젯인 <code class="language-plaintext highlighter-rouge">conversationList.dart</code> 에서 onTap 내에 이미 <code class="language-plaintext highlighter-rouge">Navigator.push</code> 메서드가 <code class="language-plaintext highlighter-rouge">ChatDetailPage()</code> 를 리턴하도록 되어 있는 것을 알수 있다.</p><div file="/lib/models/conversationList.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/models/conversationList.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>      <span class="nl">onTap:</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">Navigator</span><span class="o">.</span><span class="na">push</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">MaterialPageRoute</span><span class="p">(</span><span class="nl">builder:</span> <span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="n">ChatDetailPage</span><span class="p">();</span>
        <span class="p">}));</span>
      <span class="p">},</span>
</pre></table></code></div></div><p>우리가 할 일은 <code class="language-plaintext highlighter-rouge">Navigator.push</code>메서드가 단순히 <code class="language-plaintext highlighter-rouge">ChatDetailPage()</code> 를 리턴하는 것이 아니고, <code class="language-plaintext highlighter-rouge">ChatDetailPage()</code>페이지에 매개변수를 전달하도록 코드를 변경하는 것이다.</p><p><code class="language-plaintext highlighter-rouge">chatDetailPage</code> 페이지에 전달되어야 할 데이터는, String형태의 <code class="language-plaintext highlighter-rouge">imageUrl</code>과 <code class="language-plaintext highlighter-rouge">name</code> 이 2가지 이다. 각각 전달하는 것이 아니고, <code class="language-plaintext highlighter-rouge">ChatUsers</code> 객체를 전달해도 괜찮으나, 이번에는 그냥 각각 전달해 보겠다.</p><p><code class="language-plaintext highlighter-rouge">conversationList</code>에서 인자를 넘겨주기 전에, <code class="language-plaintext highlighter-rouge">ChatDetailPage</code>에서 인자를 받을 수 있도록 정의 부터 해줘야 한다.</p><div file="/lib/screen/ChatDetailPage.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/screen/ChatDetailPage.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">ChatDetailPage</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="p">{</span>
  <span class="c1">//final ChatUsers chatuser;</span>
  <span class="kt">String</span> <span class="n">cpname</span><span class="p">;</span>
  <span class="kt">String</span> <span class="n">cpimageurl</span><span class="p">;</span>

  <span class="n">ChatDetailPage</span><span class="p">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">cpimageurl</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">cpname</span><span class="p">})</span>
      <span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="nl">key:</span> <span class="n">key</span><span class="p">);</span>

  <span class="nd">@override</span>
  <span class="n">_ChatDetailPageState</span> <span class="n">createState</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_ChatDetailPageState</span><span class="p">();</span>
<span class="p">}</span>
</pre></table></code></div></div><p>@override 위 쪽에, imageurl과 name가 들어 갈 변수를 정의해 준 후, 인자로 받을 수 있도록 생성자를 작성해 주었다. imageurl과 name 둘 다 필수적인 인자이니 <code class="language-plaintext highlighter-rouge">required</code> 지정.</p><p>다시 <code class="language-plaintext highlighter-rouge">conversationList</code>로 돌아와서 인자를 전달해 주었다.</p><div file="/lib/models/conversationList.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/models/conversationList.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>      <span class="nl">onTap:</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">Navigator</span><span class="o">.</span><span class="na">push</span><span class="p">(</span>
            <span class="n">context</span><span class="p">,</span>
            <span class="n">MaterialPageRoute</span><span class="p">(</span>
              <span class="nl">builder:</span> <span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">ChatDetailPage</span><span class="p">(</span>
                <span class="nl">cpimageurl:</span> <span class="n">widget</span><span class="o">.</span><span class="na">imageUrl</span><span class="p">,</span>
                <span class="nl">cpname:</span> <span class="n">widget</span><span class="o">.</span><span class="na">name</span><span class="p">,</span>
              <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">;</span>
      <span class="p">},</span>
</pre></table></code></div></div><p>여기까지 하면, <code class="language-plaintext highlighter-rouge">conversationList</code>의 imageurl과 name이 <code class="language-plaintext highlighter-rouge">chatDetailPage</code>로 넘어간 것이다! 이제 <code class="language-plaintext highlighter-rouge">chatDetailPage</code>의 해당 값(imageurl과 name)을 고정값이 아닌 선언했던 변수로 바꾸어 주면 끝!</p><ul><li><code class="language-plaintext highlighter-rouge">CircleAvatar</code> 의 <code class="language-plaintext highlighter-rouge">backgroundImage</code> 키의 값을 <code class="language-plaintext highlighter-rouge">"https://randomuser.me/api/portraits/men/5.jpg"</code> 에서 <code class="language-plaintext highlighter-rouge">widget.cpimageurl</code>로 변경<li><code class="language-plaintext highlighter-rouge">Text</code> 의 <code class="language-plaintext highlighter-rouge">"Kriss Benwat"</code> 를 <code class="language-plaintext highlighter-rouge">widget.cpname</code> 로 변경</ul><p>이하는 헤더(appBar) 전체 코드이다.</p><div file="/lib/screen/ChatDetailPage.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/screen/ChatDetailPage.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre><td class="rouge-code"><pre>      <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="nl">elevation:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nl">automaticallyImplyLeading:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nl">backgroundColor:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
        <span class="nl">flexibleSpace:</span> <span class="n">SafeArea</span><span class="p">(</span>
          <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
            <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span><span class="nl">right:</span> <span class="mi">16</span><span class="p">),</span>
            <span class="nl">child:</span> <span class="n">Row</span><span class="p">(</span>
              <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                <span class="n">IconButton</span><span class="p">(</span>
                  <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="n">Navigator</span><span class="o">.</span><span class="na">pop</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
                  <span class="p">},</span>
                  <span class="nl">icon:</span> <span class="n">Icon</span><span class="p">(</span>
                    <span class="n">Icons</span><span class="o">.</span><span class="na">arrow_back</span><span class="p">,</span>
                    <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black</span><span class="p">,</span>
                  <span class="p">),</span>
                <span class="p">),</span>
                <span class="n">SizedBox</span><span class="p">(</span>
                  <span class="nl">width:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">CircleAvatar</span><span class="p">(</span>
                  <span class="nl">backgroundImage:</span> <span class="n">NetworkImage</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="na">cpimageurl</span><span class="p">),</span> <span class="c1">//수정</span>
                  <span class="nl">maxRadius:</span> <span class="mi">20</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">SizedBox</span><span class="p">(</span>
                  <span class="nl">width:</span> <span class="mi">12</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Expanded</span><span class="p">(</span>
                  <span class="nl">child:</span> <span class="n">Column</span><span class="p">(</span>
                    <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span><span class="o">.</span><span class="na">start</span><span class="p">,</span>
                    <span class="nl">mainAxisAlignment:</span> <span class="n">MainAxisAlignment</span><span class="o">.</span><span class="na">center</span><span class="p">,</span>
                    <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                      <span class="n">Text</span><span class="p">(</span>
                        <span class="n">widget</span><span class="o">.</span><span class="na">cpname</span><span class="p">,</span> <span class="c1">//수정</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span>
                            <span class="nl">fontSize:</span> <span class="mi">16</span><span class="p">,</span> <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">w600</span><span class="p">),</span>
                      <span class="p">),</span>
                      <span class="n">SizedBox</span><span class="p">(</span>
                        <span class="nl">height:</span> <span class="mi">6</span><span class="p">,</span>
                      <span class="p">),</span>
                      <span class="n">Text</span><span class="p">(</span>
                        <span class="s">"Online"</span><span class="p">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span>
                            <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">grey</span><span class="o">.</span><span class="na">shade600</span><span class="p">,</span> <span class="nl">fontSize:</span> <span class="mi">13</span><span class="p">),</span>
                      <span class="p">),</span>
                    <span class="p">],</span>
                  <span class="p">),</span>
                <span class="p">),</span>
                <span class="n">Icon</span><span class="p">(</span>
                  <span class="n">Icons</span><span class="o">.</span><span class="na">settings</span><span class="p">,</span>
                  <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black54</span><span class="p">,</span>
                <span class="p">),</span>
              <span class="p">],</span>
            <span class="p">),</span>
          <span class="p">),</span>
        <span class="p">),</span>
      <span class="p">),</span>
</pre></table></code></div></div><p>결과물을 확인해 보면, 이제 <code class="language-plaintext highlighter-rouge">chatDetailPage</code> 페이지 헤더에 Chat 화면의 리스트에서 클릭한 사람의 이미지와 이름이 뜨는 것을 볼 수 있다.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_03.gif" alt="Flutter Simple chat UI ex 03" width="30%" height="30%" data-proofer-ignore></p><h1 id="chat-detail-화면--메세지-입력">Chat Detail 화면 : 메세지 입력</h1><p>이제 채팅을 입력하는 화면에서 실제로</p><ol><li>텍스트 박스(<a href="https://api.flutter.dev/flutter/material/TextField-class.html">TextField</a>)에 메세지를 입력하고<li>송신 버튼(<a href="https://api.flutter.dev/flutter/material/FloatingActionButton-class.html">FloatingActionButton</a>)을 누르면<li>메세지 로그에 입력한 메세지가 띄워지도록 해볼 것이다.</ol><p>메세지를 입력하는 부분인 <a href="https://api.flutter.dev/flutter/material/TextField-class.html">TextField</a> 클래스는 <a href="https://api.flutter.dev/flutter/material/TextField/controller.html"><code class="language-plaintext highlighter-rouge">controller</code></a>라는 키를 가지는데, 여기에 텍스틀를 제어하는 <a href="https://api.flutter.dev/flutter/widgets/TextEditingController-class.html">TextEditingController</a> 인스턴스를 지정해 줄 수 있다.</p><p>그러므로 <a href="https://api.flutter.dev/flutter/widgets/TextEditingController-class.html">TextEditingController</a> 인스턴스를 선언해주고, <code class="language-plaintext highlighter-rouge">controller</code> 키에 만든 인스턴스를 지정하면 입력된 텍스트를 제어할 수 있게 된다.</p><p>그렇게 입력된 텍스트를, 송신 버튼을 누르면 메세지 리스트에 저장하고 싶다. 그러면 <a href="https://api.flutter.dev/flutter/material/FloatingActionButton-class.html">FloatingActionButton</a> 클래스의 <code class="language-plaintext highlighter-rouge">onPressed</code> 키에 입력된 값을 메세지 리스트에 추가하는 코드를 써주면 된다.</p><p>일단 여기까지 입력된 텍스트가 제대로 변수에 저장이 되는지 확인해 보겠다.</p><p>먼저 <code class="language-plaintext highlighter-rouge">_ChatDetailPageState</code> 클래스에 <a href="https://api.flutter.dev/flutter/widgets/TextEditingController-class.html">TextEditingController</a> 인스턴스를 선언</p><div file="/lib/screen/ChatDetailPage.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/screen/ChatDetailPage.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>  <span class="kd">final</span> <span class="n">TextEditingController</span> <span class="n">msgtextController</span> <span class="o">=</span> <span class="n">TextEditingController</span><span class="p">();</span>
</pre></table></code></div></div><p>확인을 위해 <code class="language-plaintext highlighter-rouge">debugPrint</code>로 콘솔에 변수 값을 출력해줘봄…</p><div file="/lib/screen/ChatDetailPage.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/screen/ChatDetailPage.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre>                  <span class="n">Expanded</span><span class="p">(</span>
                    <span class="nl">child:</span> <span class="n">TextField</span><span class="p">(</span>
                      <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
                          <span class="nl">hintText:</span> <span class="s">"Write message..."</span><span class="p">,</span>
                          <span class="nl">hintStyle:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black54</span><span class="p">),</span>
                          <span class="nl">border:</span> <span class="n">InputBorder</span><span class="o">.</span><span class="na">none</span><span class="p">),</span>
                      <span class="nl">controller:</span> <span class="n">msgtextController</span><span class="p">,</span> <span class="c1">//추가</span>
                    <span class="p">),</span>
                  <span class="p">),</span>
                  <span class="n">SizedBox</span><span class="p">(</span>
                    <span class="nl">width:</span> <span class="mi">15</span><span class="p">,</span>
                  <span class="p">),</span>
                  <span class="n">FloatingActionButton</span><span class="p">(</span>
                    <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
                      <span class="n">ChatMessage</span> <span class="n">newMsg</span> <span class="o">=</span> <span class="n">ChatMessage</span><span class="p">(</span>
                          <span class="nl">messageContent:</span> <span class="n">msgtextController</span><span class="o">.</span><span class="na">text</span><span class="p">,</span>
                          <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">);</span> <span class="c1">//추가, 변수에 입력값 저장</span>
                      <span class="n">debugPrint</span><span class="p">(</span><span class="s">'Input text : </span><span class="si">${newMsg.messageContent}</span><span class="s">'</span><span class="p">);</span>  <span class="c1">//추가, 확인을 위해 콘솔에 변수값 출력</span>
                      <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">newMsg</span><span class="p">);</span> <span class="c1">//추가, 메세지 리스트에 새로운 메세지 추가</span>
                    <span class="p">},</span>
                    <span class="nl">child:</span> <span class="n">Icon</span><span class="p">(</span>
                      <span class="n">Icons</span><span class="o">.</span><span class="na">send</span><span class="p">,</span>
                      <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
                      <span class="nl">size:</span> <span class="mi">18</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="nl">backgroundColor:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">blue</span><span class="p">,</span>
                    <span class="nl">elevation:</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="p">),</span>
</pre></table></code></div></div><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_04.gif" alt="Flutter Simple chat UI ex 04" width="30%" height="30%" data-proofer-ignore></p><p>위의 gif 가장 하단에 보이는 검정색 바탕 화면이 콘솔화면인데, 시뮬레이터에 입력한 값이 제대로 출력되는 것을 볼 수 있다.</p><p>이 값을 메세지 로그(바디)에 출력해 주기 위해서는 버튼을 눌렀을 때, 리스트 뷰를 다시 빌드해주는 <code class="language-plaintext highlighter-rouge">setState()</code> 함수를 호출하면 된다!</p><div file="/lib/screen/ChatDetailPage.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/screen/ChatDetailPage.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>                  <span class="n">FloatingActionButton</span><span class="p">(</span>
                    <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
                      <span class="n">ChatMessage</span> <span class="n">newMsg</span> <span class="o">=</span> <span class="n">ChatMessage</span><span class="p">(</span>
                          <span class="nl">messageContent:</span> <span class="n">msgtextController</span><span class="o">.</span><span class="na">text</span><span class="p">,</span>
                          <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">);</span> 
                      <span class="c1">//debugPrint('Input text : ${newMsg.messageContent}'); </span>
                      <span class="n">setState</span><span class="p">(()</span> <span class="p">{</span>
                        <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">newMsg</span><span class="p">);</span> 
                      <span class="p">});</span> <span class="c1">//추가, 버튼을 누를 때 마다 리스트뷰 갱신</span>
                    <span class="p">},</span>
</pre></table></code></div></div><p>결과물을 이하와 같다.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_05.gif" alt="Flutter Simple chat UI ex 05" width="30%" height="30%" data-proofer-ignore></p><h2 id="메세지-입력에-따른-chat-detail-화면의-디테일한-ui-수정"><span class="mr-2">메세지 입력에 따른 Chat Detail 화면의 디테일한 UI 수정</span><a href="#메세지-입력에-따른-chat-detail-화면의-디테일한-ui-수정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>제대로된 채팅 앱처럼 만들기 위해서는 그 외에도 여러가지 자잘한 작업이 필요한데,</p><ol><li><p>메세지 송신 후, 메세지 필드 비우기<br /> 화면을 보면 송신 후에도 입력했던 텍스트가 아직 텍스트 필드에 남아 있는 것을 알 수 있다.<br /> 이때도 역시 텍스트 필드에 있는 값을 제어하는 것이므로, <a href="https://api.flutter.dev/flutter/widgets/TextEditingController-class.html">TextEditingController</a>에 구현되어있는 <code class="language-plaintext highlighter-rouge">clear()</code> 함수 호출하면 쉽게 텍스트 필드를 비워 줄 수 있다.</p><li><p>텍스트 필드 멀티라인 입력<br /> 텍스트 필드에 메세지를 입력해보면, 텍스트 필드의 길이를 초과하는 메세지를 입력해도 개행이 되지 않는 것을 알 수 있다. 이것을 텍스트 필드의 길이에 맞춰 자동으로 개행이 되도록(=멀티라인 입력이 가능하도록) 수정해 주었다.</p><li><p>바텀 높이 고정 해제, 맥스 높이 설정<br /> 2에서 기왕 멀티라인이 입력되게 해주었는데, 바텀의 높이가 60으로 고정이 되어있어서 멀티라인이 입력되는게 잘 보이지 않는다. 그러므로, 고정되어있는 <code class="language-plaintext highlighter-rouge">Container</code>의 높이를 해제해 주고, <code class="language-plaintext highlighter-rouge">ConstrainedBox</code>위젯을 추가해 텍스트 필드로 인해 최대로 커질 수 있는 높이를 300으로 설정해 주었다.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_10-03-01.png" alt="Flutter Simple chat UI ex 10-03 origin" width="30%" height="30%" data-proofer-ignore></p><p align="center">수정 전</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_10-03-02.png" alt="Flutter Simple chat UI ex 10-03 edit" width="30%" height="30%" data-proofer-ignore></p><p align="center">수정 후</p><li><p>송신메세지와 수산메세지 박스 정렬 수정<br /> 이건 단순히 UI수정이므로, 취향에 따라 수정해 주면 된다.<br /> 장문의 메세지일 경우, 원래는 송신메세지 박스와 수신메세지 박스가 모두 화면에 꽉 차는 상태인데, 나는 수신메세지의 경우 오른쪽에 좀 간격을 남기고, 송신메세지의 경우 왼쪽에 좀더 간격을 남기도록 메세지 박스에 마진을 설정해 주었다.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_10-04-01.png" alt="Flutter Simple chat UI ex 10-04 origin" width="30%" height="30%" data-proofer-ignore></p><p align="center">수정 전</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_10-04-02.png" alt="Flutter Simple chat UI ex 10-04 edit" width="30%" height="30%" data-proofer-ignore></p><p align="center">수정 후</p><li><p>송신버튼 크기 고정<br /> 이것도 단순 UI 수정이므로 취향에 따라… 원문대로라면 송신 버튼이 <code class="language-plaintext highlighter-rouge">FloatingActionButton</code>위젯으로 설정되어있어서, 텍스트 필드의 크기에 따라서 백그라운드의 크기가 멋대로 바뀔것이다. 매우 마음에 들지 않으므로 좌측의 버튼처럼 송신 버튼의 모양도 <code class="language-plaintext highlighter-rouge">SizedBox</code>로 감싸서 높이와 크기를 고정해 주었다.<br /> (3번의 스크린 샷에서 버튼이 고정되어있는 이유는 이미 수정 후에 스크린샷을 찍었기 때문)</p><li><p>송신버튼,첨부버튼 위치 고정<br /> 이것도 단순 UI 수정이므로 취향에 따라… 마찬가지로 원문대로라면 좌측의 첨부 버튼, 송신 버튼 모두 텍스트 필드의 높이가 커짐에 따라서 위로 올라갈것이다.(높이 가운데 정렬이 됨) 나는 이걸 하단에 고정 시켜 주고 싶어서 정렬 <code class="language-plaintext highlighter-rouge">Row</code>위젯에 정렬을 추가해 주었다.<br /> (3번의 스크린 샷에서 버튼이 고정되어있는 이유는 이미 수정 후에 스크린샷을 찍었기 때문)</p><li>입력이 있을 때만 메세지 전송<br /> 입력이 없을 때, 송신버튼을 눌러도 반응하지 않도록, <code class="language-plaintext highlighter-rouge">FloatingActionButton</code>위젯의 <code class="language-plaintext highlighter-rouge">onPressed</code>함수에 조건문을 추가해 주었다.<blockquote><p>단, 지금은 스페이스 바나 엔터도 입력으로 취급한다. 나중에 걸러주는 코드를 추가할 예정…</p></blockquote><li><p>메세지 로그 스크롤<br /> 메세지 로그를 표시하는 <code class="language-plaintext highlighter-rouge">Listview</code> 위젯이 스크롤이 되지 않아서 메세지 내용의 길이가 스크린 화면을 벗어나면 더 이상 내용을 볼 수가 없다. 그래서 메세지 로그를 표시하는 리스트 뷰 위젯을 <code class="language-plaintext highlighter-rouge">SingleChildScrollView</code> 위젯으로 감싸주었다.</p><li>메세지 입력 시, 메세지 로그 가장 하단(최신)으로 이동<ul><li>스크롤을 제어하기 위한 스크롤 컨트롤러를 선언해 준 후, 메세지 로그 부분에 스크롤 컨트롤러 추가<li>스크롤의 가장 마지막 부분으로 이동하는 <code class="language-plaintext highlighter-rouge">_scrollToLatest</code>라는 함수를 작성<li><code class="language-plaintext highlighter-rouge">FloatingActionButton</code>위젯의 <code class="language-plaintext highlighter-rouge">onPressed</code>함수에서 작성한 <code class="language-plaintext highlighter-rouge">_scrollToLatest</code>를 호출</ul><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_10-09.gif" alt="Flutter Simple chat UI ex 10-09" width="30%" height="30%" data-proofer-ignore></p><blockquote><p>#수정 보류중인 오류<br /> 스크롤이 없다가 생기는 경우, (처음 한 줄만) 스크롤이 제대로 이동을 안함</p></blockquote><p>여기까지의 <code class="language-plaintext highlighter-rouge">ChatDetailPage.dart</code> 전체 코드</p><div file="/lib/screen/ChatDetailPage.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/screen/ChatDetailPage.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:flutter/foundation.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flutter/material.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flt_simple_chat_ex/models/chatMessageModel.dart'</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">ChatDetailPage</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="p">{</span>
<span class="kt">String</span> <span class="n">cpname</span><span class="p">;</span>
<span class="kt">String</span> <span class="n">cpimageurl</span><span class="p">;</span>

<span class="n">ChatDetailPage</span><span class="p">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">cpimageurl</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">cpname</span><span class="p">})</span>
    <span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="nl">key:</span> <span class="n">key</span><span class="p">);</span>

<span class="nd">@override</span>
<span class="n">_ChatDetailPageState</span> <span class="nf">createState</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_ChatDetailPageState</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">_ChatDetailPageState</span> <span class="kd">extends</span> <span class="n">State</span><span class="p">&lt;</span><span class="n">ChatDetailPage</span><span class="p">&gt;</span> <span class="p">{</span>
<span class="kt">List</span><span class="p">&lt;</span><span class="n">ChatMessage</span><span class="p">&gt;</span> <span class="n">messages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"Hello, Will"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"receiver"</span><span class="p">),</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"Hello, Jane"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">),</span>
<span class="p">];</span>

<span class="kd">final</span> <span class="n">TextEditingController</span> <span class="n">msgtextController</span> <span class="o">=</span> <span class="n">TextEditingController</span><span class="p">();</span>
<span class="c1">//9. 추가, 스크롤 컨트롤러</span>
<span class="kd">final</span> <span class="n">ScrollController</span> <span class="n">_scrollController</span> <span class="o">=</span> <span class="n">ScrollController</span><span class="p">();</span>

<span class="c1">//9. 추가, 리스트 뷰의 가장 마지막(최신부분)으로 스크롤 이동</span>
<span class="kt">void</span> <span class="nf">_scrollToLatest</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">minScrollExtent</span> <span class="o">==</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 스크롤이 없을 때는, 스크롤 이동 하지 않음</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">WidgetsBinding</span><span class="o">.</span><span class="na">instance</span><span class="o">.</span><span class="na">addPostFrameCallback</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_scrollController</span><span class="o">.</span><span class="na">jumpTo</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nd">@override</span>
<span class="n">Widget</span> <span class="nf">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="p">(</span>
    <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="nl">elevation:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nl">automaticallyImplyLeading:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nl">backgroundColor:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
        <span class="nl">flexibleSpace:</span> <span class="n">SafeArea</span><span class="p">(</span>
        <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
            <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span><span class="nl">right:</span> <span class="mi">16</span><span class="p">),</span>
            <span class="nl">child:</span> <span class="n">Row</span><span class="p">(</span>
            <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                <span class="n">IconButton</span><span class="p">(</span>
                <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="n">Navigator</span><span class="o">.</span><span class="na">pop</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
                <span class="p">},</span>
                <span class="nl">icon:</span> <span class="n">Icon</span><span class="p">(</span>
                    <span class="n">Icons</span><span class="o">.</span><span class="na">arrow_back</span><span class="p">,</span>
                    <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="p">),</span>
                <span class="n">SizedBox</span><span class="p">(</span>
                <span class="nl">width:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">CircleAvatar</span><span class="p">(</span>
                <span class="nl">backgroundImage:</span> <span class="n">NetworkImage</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="na">cpimageurl</span><span class="p">),</span>
                <span class="nl">maxRadius:</span> <span class="mi">20</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">SizedBox</span><span class="p">(</span>
                <span class="nl">width:</span> <span class="mi">12</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Expanded</span><span class="p">(</span>
                <span class="nl">child:</span> <span class="n">Column</span><span class="p">(</span>
                    <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span><span class="o">.</span><span class="na">start</span><span class="p">,</span>
                    <span class="nl">mainAxisAlignment:</span> <span class="n">MainAxisAlignment</span><span class="o">.</span><span class="na">center</span><span class="p">,</span>
                    <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                    <span class="n">Text</span><span class="p">(</span>
                        <span class="n">widget</span><span class="o">.</span><span class="na">cpname</span><span class="p">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span>
                            <span class="nl">fontSize:</span> <span class="mi">16</span><span class="p">,</span> <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">w600</span><span class="p">),</span>
                    <span class="p">),</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                        <span class="nl">height:</span> <span class="mi">6</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Text</span><span class="p">(</span>
                        <span class="s">"Online"</span><span class="p">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span>
                            <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">grey</span><span class="o">.</span><span class="na">shade600</span><span class="p">,</span> <span class="nl">fontSize:</span> <span class="mi">13</span><span class="p">),</span>
                    <span class="p">),</span>
                    <span class="p">],</span>
                <span class="p">),</span>
                <span class="p">),</span>
                <span class="n">Icon</span><span class="p">(</span>
                <span class="n">Icons</span><span class="o">.</span><span class="na">settings</span><span class="p">,</span>
                <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black54</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">],</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="nl">body:</span> <span class="n">Stack</span><span class="p">(</span>
        <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
        <span class="n">SingleChildScrollView</span><span class="p">(</span>
            <span class="c1">//8. 추가, 메세지 로그 스크롤 뷰</span>
            <span class="nl">physics:</span> <span class="n">BouncingScrollPhysics</span><span class="p">(),</span> <span class="c1">//8. 추가, 메세지 로그 스크롤 뷰</span>
            <span class="nl">controller:</span> <span class="n">_scrollController</span><span class="p">,</span> <span class="c1">//9. 추가, 스크롤 컨트롤러</span>
            <span class="nl">child:</span> <span class="n">ListView</span><span class="o">.</span><span class="na">builder</span><span class="p">(</span>
            <span class="nl">itemCount:</span> <span class="n">messages</span><span class="o">.</span><span class="na">length</span><span class="p">,</span>
            <span class="nl">shrinkWrap:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span><span class="nl">top:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">70</span><span class="p">),</span>
            <span class="nl">physics:</span> <span class="n">NeverScrollableScrollPhysics</span><span class="p">(),</span>
            <span class="nl">itemBuilder:</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">Container</span><span class="p">(</span>
                <span class="nl">padding:</span>
                    <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span><span class="nl">left:</span> <span class="mi">16</span><span class="p">,</span> <span class="nl">right:</span> <span class="mi">16</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">10</span><span class="p">),</span>
                <span class="nl">child:</span> <span class="n">Align</span><span class="p">(</span>
                    <span class="nl">alignment:</span> <span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageType</span> <span class="o">==</span> <span class="s">"receiver"</span>
                        <span class="o">?</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">topLeft</span>
                        <span class="o">:</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">topRight</span><span class="p">),</span>
                    <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
                    <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="p">(</span>
                        <span class="nl">borderRadius:</span> <span class="n">BorderRadius</span><span class="o">.</span><span class="na">circular</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
                        <span class="nl">color:</span> <span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageType</span> <span class="o">==</span> <span class="s">"receiver"</span>
                            <span class="o">?</span> <span class="n">Colors</span><span class="o">.</span><span class="na">grey</span><span class="o">.</span><span class="na">shade200</span>
                            <span class="o">:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">blue</span><span class="p">[</span><span class="mi">200</span><span class="p">]),</span>
                    <span class="p">),</span>
                    <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
                    <span class="c1">//4. 추가, 송신메세지(오른쪽 정렬, 왼쪽 간격 남기기)와 수산메세지(왼쪽 정렬, 오른쪽 간격 남기기) 박스 정렬 수정</span>
                    <span class="nl">margin:</span> <span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageType</span> <span class="o">==</span> <span class="s">"receiver"</span>
                        <span class="o">?</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                            <span class="nl">left:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">right:</span> <span class="mi">64</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="o">:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                            <span class="nl">left:</span> <span class="mi">64</span><span class="p">,</span> <span class="nl">right:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">0</span><span class="p">)),</span>
                    <span class="c1">//4. 추가 END</span>
                    <span class="nl">child:</span> <span class="n">Text</span><span class="p">(</span>
                        <span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageContent</span><span class="p">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">fontSize:</span> <span class="mi">15</span><span class="p">),</span>
                    <span class="p">),</span>
                    <span class="p">),</span>
                <span class="p">),</span>
                <span class="p">);</span>
            <span class="p">},</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="n">Align</span><span class="p">(</span>
            <span class="nl">alignment:</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">bottomLeft</span><span class="p">,</span>
            <span class="nl">child:</span> <span class="n">ConstrainedBox</span><span class="p">(</span>
            <span class="c1">//3. 추가, 바텀의 맥스 높이 설정</span>
            <span class="nl">constraints:</span> <span class="n">BoxConstraints</span><span class="p">(</span>
                <span class="nl">maxHeight:</span> <span class="mi">300</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
                <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                    <span class="nl">left:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">20</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">0</span><span class="p">),</span> <span class="c1">//수정(임시), bottom10 top10</span>
                <span class="c1">//height: 60, //3. 삭제, 바텀 고정 높이 해제</span>
                <span class="nl">width:</span> <span class="kt">double</span><span class="o">.</span><span class="na">infinity</span><span class="p">,</span>
                <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
                <span class="nl">child:</span> <span class="n">Row</span><span class="p">(</span>
                <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span>
                    <span class="o">.</span><span class="na">end</span><span class="p">,</span> <span class="c1">//6. 추가, 텍스트 필드가 길어져도 첨부, 송신버튼 하단으로 고정</span>
                <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                    <span class="n">GestureDetector</span><span class="p">(</span>
                    <span class="nl">onTap:</span> <span class="p">()</span> <span class="p">{},</span>
                    <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
                        <span class="nl">height:</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="nl">width:</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="p">(</span>
                        <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">lightBlue</span><span class="p">,</span>
                        <span class="nl">borderRadius:</span> <span class="n">BorderRadius</span><span class="o">.</span><span class="na">circular</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
                        <span class="p">),</span>
                        <span class="nl">child:</span> <span class="n">Icon</span><span class="p">(</span>
                        <span class="n">Icons</span><span class="o">.</span><span class="na">add</span><span class="p">,</span>
                        <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
                        <span class="nl">size:</span> <span class="mi">20</span><span class="p">,</span>
                        <span class="p">),</span>
                      <span class="p">),</span>
                    <span class="p">),</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                    <span class="nl">width:</span> <span class="mi">15</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Expanded</span><span class="p">(</span>
                    <span class="nl">child:</span> <span class="n">TextField</span><span class="p">(</span>
                        <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
                            <span class="nl">hintText:</span> <span class="s">"Write message..."</span><span class="p">,</span>
                            <span class="nl">hintStyle:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black54</span><span class="p">),</span>
                            <span class="nl">border:</span> <span class="n">InputBorder</span><span class="o">.</span><span class="na">none</span><span class="p">),</span>
                        <span class="nl">controller:</span> <span class="n">msgtextController</span><span class="p">,</span>
                        <span class="nl">keyboardType:</span>
                            <span class="n">TextInputType</span><span class="o">.</span><span class="na">multiline</span><span class="p">,</span> <span class="c1">//2. 추가, 멀티라인 입력 가능하도록</span>
                        <span class="nl">maxLines:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//2. 추가, 멀티라인 제한 없음</span>
                      <span class="p">),</span>
                    <span class="p">),</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                    <span class="nl">width:</span> <span class="mi">15</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="c1">//5. 추가, FloatingActionButton을 SizedBox로 감싸주고 height, width 설정</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                    <span class="nl">height:</span> <span class="mi">30</span><span class="p">,</span>
                    <span class="nl">width:</span> <span class="mi">50</span><span class="p">,</span>
                    <span class="nl">child:</span> <span class="n">FloatingActionButton</span><span class="p">(</span>
                        <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">msgtextController</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">isNotEmpty</span><span class="p">)</span> <span class="p">{</span>
                            <span class="c1">//7. 추가, 입력이 있을 때만 전송</span>
                            <span class="n">ChatMessage</span> <span class="n">newMsg</span> <span class="o">=</span> <span class="n">ChatMessage</span><span class="p">(</span>
                                <span class="nl">messageContent:</span> <span class="n">msgtextController</span><span class="o">.</span><span class="na">text</span><span class="p">,</span>
                                <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">);</span>
                            <span class="c1">//debugPrint('Input text : ${newMsg.messageContent}');</span>
                            <span class="n">setState</span><span class="p">(()</span> <span class="p">{</span>
                                <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">newMsg</span><span class="p">);</span>
                                <span class="n">msgtextController</span><span class="o">.</span><span class="na">clear</span><span class="p">();</span> <span class="c1">//1. 추가, 버튼을 누른 후 텍스트 필드 클리어</span>
                            <span class="p">});</span>
                            <span class="n">_scrollToLatest</span><span class="p">();</span> <span class="c1">//9. 추가, 메세지 송신시, 가장 메세지 로그의 가장 최신 부분으로 이동</span>
                        <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nl">child:</span> <span class="n">Icon</span><span class="p">(</span>
                        <span class="n">Icons</span><span class="o">.</span><span class="na">send</span><span class="p">,</span>
                        <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
                        <span class="nl">size:</span> <span class="mi">18</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="nl">backgroundColor:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">blue</span><span class="p">,</span>
                        <span class="nl">elevation:</span> <span class="mi">0</span><span class="p">,</span>
                      <span class="p">),</span>
                    <span class="p">),</span>
                  <span class="p">],</span>
                <span class="p">),</span>
              <span class="p">),</span>
            <span class="p">),</span>
          <span class="p">),</span>
        <span class="p">],</span>
      <span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><li><p>메세지 입력 시, 텍스트 필드 크기에 따라 메세지 로그 범위도 변경<br /> 텍스트 필드의 높이가 높아지면, 메세지 로그 부분이 텍스트 필드에 맞춰서 위로 밀려났으면 좋겠는데, 지금은 그저 텍스트 필드가 커지는 만큼 메세지 로그가 가려져서 안보일 뿐이다.<br /> 수정해준 작업은 이하와 같다.</p><ul><li>메세지 로그와 바텀(입력부분)을 포함하는 <code class="language-plaintext highlighter-rouge">body</code>의 위젯의 종류를 <code class="language-plaintext highlighter-rouge">Stack</code>에서 <code class="language-plaintext highlighter-rouge">Column</code>으로 변경<li>그에 따라 변경된 자식 위젯들의 레이아웃을 수정하기 위해, 메세지 로그를 표시하는 <code class="language-plaintext highlighter-rouge">SingleChildScrollView</code> 위젯 밑에 <code class="language-plaintext highlighter-rouge">Flexible</code> 위젯을 하나더 깔아 줌<li>위젯의 크기를 취득, 갱신하는 <code class="language-plaintext highlighter-rouge">_getWidgetInfo</code> 와 <code class="language-plaintext highlighter-rouge">_updateWidgetInfo</code> 함수를 작성<li>텍스트 필드의 입력을 감지해서 바텀 부분의 위젯 높이가 변경될 경우 스크롤을 업데이트하도록 수정</ul><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30% 30%'%3E%3C/svg%3E" data-src="/assets/img/2022-08-12-Flutter-Simple-Chat-UI-EX01/SimulSc_ex_10-10.gif" alt="Flutter Simple chat UI ex 10-10" width="30%" height="30%" data-proofer-ignore></p><blockquote><p>#수정 보류중인 오류<br /> 9번과 마찬가지로 맨 처음 개행이 될 때, (처음 한 문자만) 스크롤이 제대로 이동을 안함</p></blockquote><li>스크롤이 메세지 로그 중간이 위치해 있을 경우, 입력도중에 바텀 크기가 바뀌어도 보던 화면 유지<blockquote><p>#수정 보류중인 오류<br /> 이것도 취향인데, 과거의 메세지를 보면서 텍스트 필더에 글을 입력할 때, 텍스트 필더의 높이가 높아져도 보던 메세지가 그대로 유지 되었으면 좋겠다. (지금은 그냥 텍스트 필더에 덮임) 오프셋 계산하고 어쩌고 하면 될거같은데, 보류중,,,</p></blockquote><p>여기까지의 <code class="language-plaintext highlighter-rouge">ChatDetailPage.dart</code> 전체 코드</p><div file="/lib/screen/ChatDetailPage.dart" class="language-dart highlighter-rouge"><div class="code-header"> <span data-label-text="/lib/screen/ChatDetailPage.dart"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:flutter/foundation.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flutter/material.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flt_simple_chat_ex/models/chatMessageModel.dart'</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">ChatDetailPage</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="p">{</span>
<span class="kt">String</span> <span class="n">cpname</span><span class="p">;</span>
<span class="kt">String</span> <span class="n">cpimageurl</span><span class="p">;</span>

<span class="n">ChatDetailPage</span><span class="p">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">cpimageurl</span><span class="p">,</span> <span class="kd">required</span> <span class="k">this</span><span class="o">.</span><span class="na">cpname</span><span class="p">})</span>
    <span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="nl">key:</span> <span class="n">key</span><span class="p">);</span>

<span class="nd">@override</span>
<span class="n">_ChatDetailPageState</span> <span class="nf">createState</span><span class="p">()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_ChatDetailPageState</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">_ChatDetailPageState</span> <span class="kd">extends</span> <span class="n">State</span><span class="p">&lt;</span><span class="n">ChatDetailPage</span><span class="p">&gt;</span> <span class="p">{</span>
<span class="kt">List</span><span class="p">&lt;</span><span class="n">ChatMessage</span><span class="p">&gt;</span> <span class="n">messages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"Hello, Will"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"receiver"</span><span class="p">),</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"Hello, Jane"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">),</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"aaaaaaaaaaaa"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"receiver"</span><span class="p">),</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"bbbbbbbbbbbb"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">),</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"cccccccccccc"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"receiver"</span><span class="p">),</span>
    <span class="n">ChatMessage</span><span class="p">(</span><span class="nl">messageContent:</span> <span class="s">"dddddddddddd"</span><span class="p">,</span> <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">),</span>
<span class="p">];</span>

<span class="kd">final</span> <span class="n">TextEditingController</span> <span class="n">msgtextController</span> <span class="o">=</span> <span class="n">TextEditingController</span><span class="p">();</span>
<span class="c1">//9. 추가, 스크롤 컨트롤러</span>
<span class="kd">final</span> <span class="n">ScrollController</span> <span class="n">_scrollController</span> <span class="o">=</span> <span class="n">ScrollController</span><span class="p">();</span>

<span class="c1">//9. 추가, 리스트 뷰의 가장 마지막(최신부분)으로 스크롤 이동</span>
<span class="kt">void</span> <span class="nf">_scrollToLatest</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">scrstatus</span> <span class="o">=</span> <span class="n">_scrollStatusChecker</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">scrstatus</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 스크롤이 없을 때는, 스크롤 이동 하지 않음</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"No Scroll"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">scrstatus</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WidgetsBinding</span><span class="o">.</span><span class="na">instance</span><span class="o">.</span><span class="na">addPostFrameCallback</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">jumpTo</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">scrstatus</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WidgetsBinding</span><span class="o">.</span><span class="na">instance</span><span class="o">.</span><span class="na">addPostFrameCallback</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">jumpTo</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"scroll error"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">_scrollUpdater</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="p">);</span>

    <span class="kt">int</span> <span class="n">scrstatus</span> <span class="o">=</span> <span class="n">_scrollStatusChecker</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">scrstatus</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 스크롤이 없을 때는, 스크롤 이동 하지 않음</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"No Scroll"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">scrstatus</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WidgetsBinding</span><span class="o">.</span><span class="na">instance</span><span class="o">.</span><span class="na">addPostFrameCallback</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">jumpTo</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">scrstatus</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">_currentbottomheight</span> <span class="o">==</span> <span class="n">_minbottomheight</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WidgetsBinding</span><span class="o">.</span><span class="na">instance</span><span class="o">.</span><span class="na">addPostFrameCallback</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">jumpTo</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">scrstatus</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="n">_currentbottomheight</span> <span class="o">!=</span> <span class="n">_minbottomheight</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WidgetsBinding</span><span class="o">.</span><span class="na">instance</span><span class="o">.</span><span class="na">addPostFrameCallback</span><span class="p">((</span><span class="n">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//11. 입력도중에 바텀 크기가 바뀌어도 보던 화면 유지해주고 싶음 (미구현)</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">jumpTo</span><span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">offset</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"scroll error"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">_scrollStatusChecker</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">scrsta</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">minScrollExtent</span> <span class="o">==</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 스크롤이 없음</span>
    <span class="n">scrsta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">_scrollController</span><span class="o">.</span><span class="na">offset</span> <span class="o">==</span>
        <span class="n">_scrollController</span><span class="o">.</span><span class="na">position</span><span class="o">.</span><span class="na">maxScrollExtent</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 스크롤이 최하단에 위치</span>
    <span class="n">scrsta</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// 스크롤이 화면 중간에 위치</span>
    <span class="n">scrsta</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">scrsta</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 바텀 위젯 높이 변수 정의</span>
<span class="kd">final</span> <span class="kt">double</span> <span class="n">_maxbottomheight</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span> <span class="c1">//바텀 높이 (맥시멈, 고정)</span>
<span class="kt">double</span> <span class="n">_minbottomheight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//바텀 높이 (미니멈)</span>
<span class="kt">double</span> <span class="n">_currentbottomheight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//바텀 높이 (현재)</span>

<span class="c1">// 위젯(바텀,ConstrainedBox)용 키</span>
<span class="kd">final</span> <span class="n">GlobalKey</span> <span class="n">_widgetKey</span> <span class="o">=</span> <span class="n">GlobalKey</span><span class="p">();</span>

<span class="nd">@override</span>
<span class="kt">void</span> <span class="nf">initState</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="na">initState</span><span class="p">();</span>

    <span class="c1">// 바텀 높이 초기 셋팅</span>
    <span class="n">WidgetsBinding</span><span class="o">.</span><span class="na">instance</span><span class="o">.</span><span class="na">addPostFrameCallback</span><span class="p">(</span><span class="n">_getWidgetInfo</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//10. 추가, 위젯의 크기 정보 취득 (초기 세팅)</span>
<span class="kt">void</span> <span class="nf">_getWidgetInfo</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">RenderBox</span> <span class="n">renderBox</span> <span class="o">=</span>
        <span class="n">_widgetKey</span><span class="o">.</span><span class="na">currentContext</span><span class="o">?.</span><span class="na">findRenderObject</span><span class="p">()</span> <span class="k">as</span> <span class="n">RenderBox</span><span class="p">;</span>

    <span class="kd">final</span> <span class="n">Size</span> <span class="n">size</span> <span class="o">=</span> <span class="n">renderBox</span><span class="o">.</span><span class="na">size</span><span class="p">;</span> 

    <span class="kt">double</span> <span class="n">wgwidth</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="na">width</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">wgheight</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="na">height</span><span class="p">;</span>

    <span class="n">_minbottomheight</span> <span class="o">=</span> <span class="n">wgheight</span><span class="p">;</span>
    <span class="n">_currentbottomheight</span> <span class="o">=</span> <span class="n">wgheight</span><span class="p">;</span>

    <span class="n">print</span><span class="p">(</span><span class="s">'Size: </span><span class="si">${wgwidth}</span><span class="s">, </span><span class="si">${wgheight}</span><span class="s">'</span><span class="p">);</span>

    <span class="kd">final</span> <span class="n">Offset</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">renderBox</span><span class="o">.</span><span class="na">localToGlobal</span><span class="p">(</span><span class="n">Offset</span><span class="o">.</span><span class="na">zero</span><span class="p">);</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'Offset: </span><span class="si">${offset.dx}</span><span class="s">, </span><span class="si">${offset.dy}</span><span class="s">'</span><span class="p">);</span>
    <span class="n">print</span><span class="p">(</span>
        <span class="s">'Position: </span><span class="si">${(offset.dx + size.width) / 2}</span><span class="s">, </span><span class="si">${(offset.dy + size.height) / 2}</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// END, 위젯의 크기 정보 취득</span>

<span class="c1">//10. 추가, 위젯 정보 갱신</span>
<span class="kt">void</span> <span class="nf">_updateWidgetInfo</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">RenderBox</span> <span class="n">renderBox</span> <span class="o">=</span>
        <span class="n">_widgetKey</span><span class="o">.</span><span class="na">currentContext</span><span class="o">?.</span><span class="na">findRenderObject</span><span class="p">()</span> <span class="k">as</span> <span class="n">RenderBox</span><span class="p">;</span>

    <span class="kd">final</span> <span class="n">Size</span> <span class="n">size</span> <span class="o">=</span> <span class="n">renderBox</span><span class="o">.</span><span class="na">size</span><span class="p">;</span> 

    <span class="kt">double</span> <span class="n">wgwidth</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="na">width</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">wgheight</span> <span class="o">=</span> <span class="n">size</span><span class="o">.</span><span class="na">height</span><span class="p">;</span>

    <span class="n">_currentbottomheight</span> <span class="o">=</span> <span class="n">wgheight</span><span class="p">;</span>

    <span class="n">print</span><span class="p">(</span><span class="s">'Size: </span><span class="si">${wgwidth}</span><span class="s">, </span><span class="si">${wgheight}</span><span class="s">'</span><span class="p">);</span>

    <span class="kd">final</span> <span class="n">Offset</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">renderBox</span><span class="o">.</span><span class="na">localToGlobal</span><span class="p">(</span><span class="n">Offset</span><span class="o">.</span><span class="na">zero</span><span class="p">);</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'Offset: </span><span class="si">${offset.dx}</span><span class="s">, </span><span class="si">${offset.dy}</span><span class="s">'</span><span class="p">);</span>
    <span class="n">print</span><span class="p">(</span>
        <span class="s">'Position: </span><span class="si">${(offset.dx + size.width) / 2}</span><span class="s">, </span><span class="si">${(offset.dy + size.height) / 2}</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// END, 위젯 정보 갱신</span>

<span class="nd">@override</span>
<span class="n">Widget</span> <span class="nf">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">responsiveHeight</span> <span class="o">=</span> <span class="n">MediaQuery</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="na">size</span><span class="o">.</span><span class="na">height</span><span class="p">;</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"responsiveHeight </span><span class="si">${responsiveHeight}</span><span class="s">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="p">(</span>
    <span class="c1">//resizeToAvoidBottomInset: true,</span>
    <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="nl">elevation:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nl">automaticallyImplyLeading:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nl">backgroundColor:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="o">.</span><span class="na">withOpacity</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
        <span class="nl">flexibleSpace:</span> <span class="n">SafeArea</span><span class="p">(</span>
        <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
            <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span><span class="nl">right:</span> <span class="mi">16</span><span class="p">),</span>
            <span class="nl">child:</span> <span class="n">Row</span><span class="p">(</span>
            <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                <span class="n">IconButton</span><span class="p">(</span>
                <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="n">Navigator</span><span class="o">.</span><span class="na">pop</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
                <span class="p">},</span>
                <span class="nl">icon:</span> <span class="n">Icon</span><span class="p">(</span>
                    <span class="n">Icons</span><span class="o">.</span><span class="na">arrow_back</span><span class="p">,</span>
                    <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="p">),</span>
                <span class="n">SizedBox</span><span class="p">(</span>
                <span class="nl">width:</span> <span class="mi">2</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">CircleAvatar</span><span class="p">(</span>
                <span class="nl">backgroundImage:</span> <span class="n">NetworkImage</span><span class="p">(</span><span class="n">widget</span><span class="o">.</span><span class="na">cpimageurl</span><span class="p">),</span>
                <span class="nl">maxRadius:</span> <span class="mi">20</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">SizedBox</span><span class="p">(</span>
                <span class="nl">width:</span> <span class="mi">12</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Expanded</span><span class="p">(</span>
                <span class="nl">child:</span> <span class="n">Column</span><span class="p">(</span>
                    <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span><span class="o">.</span><span class="na">start</span><span class="p">,</span>
                    <span class="nl">mainAxisAlignment:</span> <span class="n">MainAxisAlignment</span><span class="o">.</span><span class="na">center</span><span class="p">,</span>
                    <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                    <span class="n">Text</span><span class="p">(</span>
                        <span class="n">widget</span><span class="o">.</span><span class="na">cpname</span><span class="p">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span>
                            <span class="nl">fontSize:</span> <span class="mi">16</span><span class="p">,</span> <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">w600</span><span class="p">),</span>
                    <span class="p">),</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                        <span class="nl">height:</span> <span class="mi">6</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Text</span><span class="p">(</span>
                        <span class="s">"Online"</span><span class="p">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span>
                            <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">grey</span><span class="o">.</span><span class="na">shade600</span><span class="p">,</span> <span class="nl">fontSize:</span> <span class="mi">13</span><span class="p">),</span>
                    <span class="p">),</span>
                    <span class="p">],</span>
                <span class="p">),</span>
                <span class="p">),</span>
                <span class="n">Icon</span><span class="p">(</span>
                <span class="n">Icons</span><span class="o">.</span><span class="na">settings</span><span class="p">,</span>
                <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black54</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">],</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="nl">body:</span> <span class="n">Column</span><span class="p">(</span>
        <span class="c1">//10. 수정, Stack -&gt; Column</span>
        <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
        <span class="n">Flexible</span><span class="p">(</span>
            <span class="c1">//10. 수정, Container -&gt; Flexible</span>
            <span class="nl">fit:</span> <span class="n">FlexFit</span><span class="o">.</span><span class="na">tight</span><span class="p">,</span> <span class="c1">//10. 추가, 여분 화면 없이 메세지 로그 화면 확장</span>
            <span class="c1">// 추가, 컨테이너 위젯 &gt; 마진 추가하기 위해</span>
            <span class="nl">child:</span> <span class="n">SingleChildScrollView</span><span class="p">(</span>
            <span class="c1">//8. 추가, 메세지 로그 스크롤 뷰</span>
            <span class="nl">physics:</span> <span class="n">BouncingScrollPhysics</span><span class="p">(),</span> <span class="c1">//8. 추가, 메세지 로그 스크롤 뷰</span>
            <span class="nl">controller:</span> <span class="n">_scrollController</span><span class="p">,</span> <span class="c1">//9. 추가, 스크롤 컨트롤러</span>
            <span class="nl">child:</span> <span class="n">ListView</span><span class="o">.</span><span class="na">builder</span><span class="p">(</span>
                <span class="nl">itemCount:</span> <span class="n">messages</span><span class="o">.</span><span class="na">length</span><span class="p">,</span>
                <span class="nl">shrinkWrap:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                    <span class="nl">top:</span> <span class="mi">10</span><span class="p">),</span> <span class="c1">//삭제, 컨테이너 위젯에 마진추가해 줬기 때문에 bottom: 70 삭제</span>
                <span class="nl">physics:</span> <span class="n">NeverScrollableScrollPhysics</span><span class="p">(),</span>
                <span class="nl">itemBuilder:</span> <span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">Container</span><span class="p">(</span>
                    <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                        <span class="nl">left:</span> <span class="mi">16</span><span class="p">,</span> <span class="nl">right:</span> <span class="mi">16</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="nl">child:</span> <span class="n">Align</span><span class="p">(</span>
                    <span class="nl">alignment:</span> <span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageType</span> <span class="o">==</span> <span class="s">"receiver"</span>
                        <span class="o">?</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">topLeft</span>
                        <span class="o">:</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">topRight</span><span class="p">),</span>
                    <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
                        <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="p">(</span>
                        <span class="nl">borderRadius:</span> <span class="n">BorderRadius</span><span class="o">.</span><span class="na">circular</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
                        <span class="nl">color:</span> <span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageType</span> <span class="o">==</span> <span class="s">"receiver"</span>
                            <span class="o">?</span> <span class="n">Colors</span><span class="o">.</span><span class="na">grey</span><span class="o">.</span><span class="na">shade200</span>
                            <span class="o">:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">blue</span><span class="p">[</span><span class="mi">200</span><span class="p">]),</span>
                        <span class="p">),</span>
                        <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span>
                        <span class="c1">//4. 추가, 송신메세지(오른쪽 정렬, 왼쪽 간격 남기기)와 수산메세지(왼쪽 정렬, 오른쪽 간격 남기기) 박스 정렬 수정</span>
                        <span class="nl">margin:</span> <span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageType</span> <span class="o">==</span> <span class="s">"receiver"</span>
                            <span class="o">?</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                                <span class="nl">left:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">right:</span> <span class="mi">64</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">0</span><span class="p">)</span>
                            <span class="o">:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                                <span class="nl">left:</span> <span class="mi">64</span><span class="p">,</span> <span class="nl">right:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">0</span><span class="p">)),</span>
                        <span class="c1">//4. 추가 END</span>
                        <span class="nl">child:</span> <span class="n">Text</span><span class="p">(</span>
                        <span class="n">messages</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="na">messageContent</span><span class="p">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">fontSize:</span> <span class="mi">15</span><span class="p">),</span>
                        <span class="p">),</span>
                    <span class="p">),</span>
                    <span class="p">),</span>
                <span class="p">);</span>
                <span class="p">},</span>
            <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="n">Align</span><span class="p">(</span>
            <span class="nl">alignment:</span> <span class="n">Alignment</span><span class="o">.</span><span class="na">bottomLeft</span><span class="p">,</span>
            <span class="nl">child:</span> <span class="n">ConstrainedBox</span><span class="p">(</span>
            <span class="nl">key:</span> <span class="n">_widgetKey</span><span class="p">,</span> <span class="c1">//추가, 위젯 정보 얻기 위한 키</span>
            <span class="c1">//3. 추가, 바텀의 맥스 높이 설정</span>
            <span class="nl">constraints:</span> <span class="n">BoxConstraints</span><span class="p">(</span>
                <span class="nl">maxHeight:</span> <span class="n">_maxbottomheight</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
                <span class="c1">//추가, 바텀의 맥스 높이 설정</span>
                <span class="nl">padding:</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="p">(</span>
                    <span class="nl">left:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">bottom:</span> <span class="mi">20</span><span class="p">,</span> <span class="nl">top:</span> <span class="mi">0</span><span class="p">),</span> <span class="c1">//수정(임시), bottom10 top10</span>
                <span class="c1">//height: 60, //3. 삭제, 바텀 고정 높이 해제</span>
                <span class="nl">width:</span> <span class="kt">double</span><span class="o">.</span><span class="na">infinity</span><span class="p">,</span>
                <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">grey</span><span class="o">.</span><span class="na">withOpacity</span><span class="p">(</span><span class="mf">0.3</span><span class="p">),</span>
                <span class="nl">child:</span> <span class="n">Row</span><span class="p">(</span>
                <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span>
                    <span class="o">.</span><span class="na">end</span><span class="p">,</span> <span class="c1">//6. 추가, 텍스트 필드가 길어져도 첨부, 송신버튼 하단으로 고정</span>
                <span class="nl">children:</span> <span class="p">&lt;</span><span class="n">Widget</span><span class="p">&gt;[</span>
                    <span class="n">GestureDetector</span><span class="p">(</span>
                    <span class="nl">onTap:</span> <span class="p">()</span> <span class="p">{},</span>
                    <span class="nl">child:</span> <span class="n">Container</span><span class="p">(</span>
                        <span class="nl">height:</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="nl">width:</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="p">(</span>
                        <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">lightBlue</span><span class="p">,</span>
                        <span class="nl">borderRadius:</span> <span class="n">BorderRadius</span><span class="o">.</span><span class="na">circular</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
                        <span class="p">),</span>
                        <span class="nl">child:</span> <span class="n">Icon</span><span class="p">(</span>
                        <span class="n">Icons</span><span class="o">.</span><span class="na">add</span><span class="p">,</span>
                        <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
                        <span class="nl">size:</span> <span class="mi">20</span><span class="p">,</span>
                        <span class="p">),</span>
                    <span class="p">),</span>
                    <span class="p">),</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                    <span class="nl">width:</span> <span class="mi">15</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Expanded</span><span class="p">(</span>
                    <span class="nl">child:</span> <span class="n">TextField</span><span class="p">(</span>
                        <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
                            <span class="nl">hintText:</span> <span class="s">"Write message..."</span><span class="p">,</span>
                            <span class="nl">hintStyle:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">black54</span><span class="p">),</span>
                            <span class="nl">border:</span> <span class="n">InputBorder</span><span class="o">.</span><span class="na">none</span><span class="p">),</span>
                        <span class="nl">controller:</span> <span class="n">msgtextController</span><span class="p">,</span>
                        <span class="nl">onChanged:</span> <span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">//텍스트 필드의 내용이 변경될 때 마다 감지</span>
                        <span class="n">_updateWidgetInfo</span><span class="p">();</span> <span class="c1">//10. 추가, 바텀 높이를 </span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">_currentbottomheight</span> <span class="o">!=</span> <span class="n">_minbottomheight</span><span class="p">)</span> <span class="p">{</span>
                            <span class="c1">//10. 추가, 텍스트 필드 높이가 변하면 스크롤도 이동해줌</span>
                            <span class="n">_scrollUpdater</span><span class="p">();</span>
                        <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nl">keyboardType:</span>
                            <span class="n">TextInputType</span><span class="o">.</span><span class="na">multiline</span><span class="p">,</span> <span class="c1">//2. 추가, 멀티라인 입력 가능하도록</span>
                        <span class="nl">maxLines:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">//2. 추가, 멀티라인 제한 없음</span>
                    <span class="p">),</span>
                    <span class="p">),</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                    <span class="nl">width:</span> <span class="mi">15</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="c1">//5. 추가, FloatingActionButton을 SizedBox로 감싸주고 height, width 설정</span>
                    <span class="n">SizedBox</span><span class="p">(</span>
                    <span class="nl">height:</span> <span class="mi">30</span><span class="p">,</span>
                    <span class="nl">width:</span> <span class="mi">50</span><span class="p">,</span>
                    <span class="nl">child:</span> <span class="n">FloatingActionButton</span><span class="p">(</span>
                        <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">msgtextController</span><span class="o">.</span><span class="na">text</span><span class="o">.</span><span class="na">isNotEmpty</span><span class="p">)</span> <span class="p">{</span>
                            <span class="c1">//7. 추가, 입력이 있을 때만 전송</span>
                            <span class="n">ChatMessage</span> <span class="n">newMsg</span> <span class="o">=</span> <span class="n">ChatMessage</span><span class="p">(</span>
                                <span class="nl">messageContent:</span> <span class="n">msgtextController</span><span class="o">.</span><span class="na">text</span><span class="p">,</span>
                                <span class="nl">messageType:</span> <span class="s">"sender"</span><span class="p">);</span>
                            <span class="n">debugPrint</span><span class="p">(</span><span class="s">'Input text : </span><span class="si">${newMsg.messageContent}</span><span class="s">'</span><span class="p">);</span>
                            <span class="n">setState</span><span class="p">(()</span> <span class="p">{</span>
                            <span class="n">messages</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">newMsg</span><span class="p">);</span>
                            <span class="n">msgtextController</span>
                                <span class="o">.</span><span class="na">clear</span><span class="p">();</span> <span class="c1">//1. 추가, 버튼을 누른 후 텍스트 필드 클리어</span>
                            <span class="p">});</span>
                            <span class="n">_scrollToLatest</span><span class="p">();</span> <span class="c1">//9. 추가, 메세지 송신시, 가장 메세지 로그의 가장 최신 부분으로 이동</span>
                        <span class="p">}</span>
                        <span class="p">},</span>
                        <span class="nl">child:</span> <span class="n">Icon</span><span class="p">(</span>
                        <span class="n">Icons</span><span class="o">.</span><span class="na">send</span><span class="p">,</span>
                        <span class="nl">color:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">white</span><span class="p">,</span>
                        <span class="nl">size:</span> <span class="mi">18</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="nl">backgroundColor:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">blue</span><span class="p">,</span>
                        <span class="nl">elevation:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="p">),</span>
                <span class="p">],</span>
                <span class="p">),</span>
            <span class="p">),</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="p">],</span>
    <span class="p">),</span>
    <span class="p">);</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div></ol><hr /><h1 id="flutter-기초--참고하기-좋은-사이트">flutter 기초 : 참고하기 좋은 사이트</h1><ul><li><a href="https://pogon.tistory.com/entry/Flutter-화면-배치에-쓰는-기본-위젯-정리">Flutter 화면 배치에 쓰는 기본 위젯 정리</a></ul><hr /><h1 id="후기">후기</h1><p>포스트를 작성하면서 느낀 점</p><ul><li>다트에서는 대체로 위젯이라는 용어를 쓰나본데, 아직 클래스나 객체라는 단어가 익숙해서 혼동해서 쓰게 된다.<li>자잘한 수정은 한 개 수정할 때마다 코드를 첨부하기가 애매해서 번호를 매겨서 설명만 쭉 작성 후, 마지막에 전체 코드를 첨부, 코드안에 주석으로 몇 번에 해당하는 수정, 추가 사항인지 작성했다.<li>위의 전체 코드에서 10번, 11번을 포함시키지 않은 이유는, 지금까지 썼던 베이스 위젯의 종류를 아예 바꾸는 등 수정한 내용이 많았기 때문이다.<li>뭐든 그렇겠지만 처음부터 무슨 기능을 구현하고 싶은지 염두에 두고 알맞은 위젯을 쓰는게 가장 효율적일텐데 그게 참 어려운 부분이지…</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/flutter/'>Flutter</a>, <a href='/categories/simple-chat/'>Simple Chat</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/flutter/" class="post-tag no-text-decoration" >flutter</a> <a href="/tags/practice/" class="post-tag no-text-decoration" >practice</a> <a href="/tags/programming/" class="post-tag no-text-decoration" >programming</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Flutter+01+Simple+Chat+UI+%EC%9D%91%EC%9A%A9+01+%ED%99%94%EB%A9%B4+%EA%B0%84+%EB%8D%B0%EC%9D%B4%ED%84%B0+%EC%A0%84%EB%8B%AC%2C+%EB%A9%94%EC%84%B8%EC%A7%80+%EC%9E%85%EB%A0%A5++-+Kae%27s+Dev&url=https%3A%2F%2Fkaesknzxvf.github.io%2Fposts%2FFlutter-Simple-Chat-UI-EX01%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Flutter+01+Simple+Chat+UI+%EC%9D%91%EC%9A%A9+01+%ED%99%94%EB%A9%B4+%EA%B0%84+%EB%8D%B0%EC%9D%B4%ED%84%B0+%EC%A0%84%EB%8B%AC%2C+%EB%A9%94%EC%84%B8%EC%A7%80+%EC%9E%85%EB%A0%A5++-+Kae%27s+Dev&u=https%3A%2F%2Fkaesknzxvf.github.io%2Fposts%2FFlutter-Simple-Chat-UI-EX01%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fkaesknzxvf.github.io%2Fposts%2FFlutter-Simple-Chat-UI-EX01%2F&text=Flutter+01+Simple+Chat+UI+%EC%9D%91%EC%9A%A9+01+%ED%99%94%EB%A9%B4+%EA%B0%84+%EB%8D%B0%EC%9D%B4%ED%84%B0+%EC%A0%84%EB%8B%AC%2C+%EB%A9%94%EC%84%B8%EC%A7%80+%EC%9E%85%EB%A0%A5++-+Kae%27s+Dev" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div><script src="https://utteranc.es/client.js" repo="kaesknzxvf/kaesknzxvf.github.io" issue-term="pathname" theme="github-dark" crossorigin="anonymous" async> </script></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Flutter-Simple-Chat-UI-01/">Flutter 01 Simple Chat UI 01 Chat화면</a><li><a href="/posts/Flutter-Simple-Chat-UI-02/">Flutter 01 Simple Chat UI 02 Chat Detail 화면</a><li><a href="/posts/Flutter-Simple-Chat-UI-EX01/">Flutter 01 Simple Chat UI 응용 01 화면 간 데이터 전달, 메세지 입력 </a><li><a href="/posts/Flutter-Simple-Chat-UI-EX02/">Flutter 01 Simple Chat UI 응용 02 데이터 로컬 저장 및 읽기,쓰기_유저정보편 (+상태창 추가) </a><li><a href="/posts/Github-Blog-Setting-01/">Github Blog 02 Chirpy Theme Setting </a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/flutter/">flutter</a> <a class="post-tag" href="/tags/practice/">practice</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/myblogging/">myblogging</a> <a class="post-tag" href="/tags/personal/">personal</a> <a class="post-tag" href="/tags/writeup/">writeup</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Flutter-Simple-Chat-UI-01/"><div class="card-body"> <em class="small" data-ts="1657426206" data-df="ll" > Jul 10, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Flutter 01 Simple Chat UI 01 Chat화면</h3><div class="text-muted small"><p> 이 포스트는 How to Build a Chat App UI With Flutter and Dart 을 따라서 작성한 Flutter Simple Chat UI 에 관한 내용이다. 관련 포스트 Base, Chat 화면 구현 (현재 포스트) Chat Detail 화면 구현 응용 01 (Chat Detail 화면) 화면 간 ...</p></div></div></a></div><div class="card"> <a href="/posts/Flutter-Simple-Chat-UI-02/"><div class="card-body"> <em class="small" data-ts="1659761220" data-df="ll" > Aug 6, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Flutter 01 Simple Chat UI 02 Chat Detail 화면</h3><div class="text-muted small"><p> 이 포스트는 How to Build a Chat App UI With Flutter and Dart 을 따라서 작성한 Flutter Simple Chat UI 에 관한 내용이다. 관련 포스트 Base, Chat 화면 구현 Chat Detail 화면 구현 (현재 포스트) 응용 01 (Chat Detail 화면) 화면 간 ...</p></div></div></a></div><div class="card"> <a href="/posts/Flutter-Simple-Chat-UI-EX02/"><div class="card-body"> <em class="small" data-ts="1662181680" data-df="ll" > Sep 3, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Flutter 01 Simple Chat UI 응용 02 데이터 로컬 저장 및 읽기,쓰기_유저정보편 (+상태창 추가)</h3><div class="text-muted small"><p> 이 포스트는 How to Build a Chat App UI With Flutter and Dart 을 따라서 작성한 Flutter Simple Chat UI 을 응용하여 좀 더 그럴듯한 채팅앱을 구현하기 위한 과정을 다룬다. 주요 내용/순서은 이하와 같다. 데이터 저장 환경 구축 데이터 저장 방법 선택 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Flutter-Simple-Chat-UI-02/" class="btn btn-outline-primary" prompt="Older"><p>Flutter 01 Simple Chat UI 02 Chat Detail 화면</p></a> <a href="/posts/Flutter-Simple-Chat-UI-EX02/" class="btn btn-outline-primary" prompt="Newer"><p>Flutter 01 Simple Chat UI 응용 02 데이터 로컬 저장 및 읽기,쓰기_유저정보편 (+상태창 추가)</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/kaesknzxvf">kae</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/flutter/">flutter</a> <a class="post-tag" href="/tags/practice/">practice</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/myblogging/">myblogging</a> <a class="post-tag" href="/tags/personal/">personal</a> <a class="post-tag" href="/tags/writeup/">writeup</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-B23YJG8BQ3"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-B23YJG8BQ3'); }); </script>
